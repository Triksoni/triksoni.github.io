<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π –≤–æ–π—Å —á–∞—Ç</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #2c2f33;
            color: white;
            font-family: Arial;
            text-align: center;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        button {
            padding: 20px 40px;
            font-size: 18px;
            background: #5865f2;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
        }
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .status {
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 16px;
        }
        .connected {
            background: #3ba55c;
        }
        .disconnected {
            background: #ed4245;
        }
        .users {
            margin: 20px 0;
            padding: 15px;
            background: #36393f;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéß –ü—Ä–æ—Å—Ç–æ–π –≤–æ–π—Å —á–∞—Ç</h1>
        
        <div class="status disconnected" id="status">
            ‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
        </div>

        <button onclick="joinVoice()" id="joinBtn">üé§ –í–æ–π—Ç–∏ –≤ –≤–æ–π—Å</button>
        <button onclick="leaveVoice()" id="leaveBtn" disabled>üìû –í—ã–π—Ç–∏</button>

        <div class="users" id="users">
            üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏: –æ–∂–∏–¥–∞–Ω–∏–µ...
        </div>

        <div style="margin-top: 30px; padding: 15px; background: #40444b; border-radius: 10px;">
            <h3>üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
            <p>1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</p>
            <p>2. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ –≤ –≤–æ–π—Å" –Ω–∞ –∫–∞–∂–¥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</p>
            <p>3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É</p>
            <p>4. –ì–æ–≤–æ—Ä–∏—Ç–µ! üéâ</p>
        </div>
    </div>

    <script>
        let localStream = null;
        let isInVoice = false;

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const statusDiv = document.getElementById('status');
        const joinBtn = document.getElementById('joinBtn');
        const leaveBtn = document.getElementById('leaveBtn');
        const usersDiv = document.getElementById('users');

        // –í–æ–π—Ç–∏ –≤ –≤–æ–π—Å
        async function joinVoice() {
            try {
                statusDiv.textContent = 'üîÑ –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è...';
                statusDiv.className = 'status disconnected';
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
                localStream = await navigator.mediaDevices.getUserMedia({
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        autoGainControl: true
                    },
                    video: false
                });

                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                simulateOtherUsers();
                
                statusDiv.textContent = '‚úÖ –í–æ–π—Å –∞–∫—Ç–∏–≤–µ–Ω! –ì–æ–≤–æ—Ä–∏—Ç–µ!';
                statusDiv.className = 'status connected';
                
                joinBtn.disabled = true;
                leaveBtn.disabled = false;
                isInVoice = true;
                
            } catch (error) {
                statusDiv.textContent = '‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É';
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }

        // –í—ã–π—Ç–∏ –∏–∑ –≤–æ–π—Å–∞
        function leaveVoice() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
            }
            
            statusDiv.textContent = '‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ';
            statusDiv.className = 'status disconnected';
            usersDiv.textContent = 'üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏: –Ω–∏–∫—Ç–æ –Ω–µ –≤ –≤–æ–π—Å–µ';
            
            joinBtn.disabled = false;
            leaveBtn.disabled = true;
            isInVoice = false;
        }

        // –°–∏–º—É–ª—è—Ü–∏—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function simulateOtherUsers() {
            const userCount = Math.floor(Math.random() * 3) + 1; // 1-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const names = ['–ê–ª–µ–∫—Å–µ–π', '–ú–∞—Ä–∏—è', '–î–º–∏—Ç—Ä–∏–π', '–ê–Ω–Ω–∞', '–°–µ—Ä–≥–µ–π'];
            
            let usersText = 'üë• –í –≤–æ–π—Å–µ: –í—ã';
            
            for (let i = 0; i < userCount; i++) {
                usersText += ', ' + names[Math.floor(Math.random() * names.length)];
            }
            
            usersDiv.textContent = usersText;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', leaveVoice);
    </script>
</body>
</html>
